# ObjExtensibleStorage

## 简介

这是一个扩展存储框架。

熟悉Revit和Bentley软件的同学应该会对“扩展存储”更更容易理解一点，简单说就是把一些额外的信息记录在对象上。什么是额外的信息呢？举一个不太恰当的例子，对于一个Person类来说，姓名性别年龄等，这种一看就是这个对象的属性，显然可以直接写在类里，然而，对于一些其他信息，比如，有一个人需要额外存储他的班级三年二班，另一个人需要存储他的公司xx公司，那么这些信息显然无法直接写在Person类中。那解决这个问题，比较好的办法是，(仅针对上述问题分析)可以抽象出职员类和学生类存储相应的信息，用Person类作为共同的父类；还有的做法可以以Person的id作为外键，重新建几张表来存储...当然这里各种方法的优略性我就不做分析了，有没有另外一种办法呢？

显然，这个框架就是解决这个问题的，还是用Revit和Bentley 的PowerPlatform举例，他们的基本元素都是Element，Element的核心还是存储的几何信息。Revit的做做法就是抽象出各种子类去记录特有的信息，而PowerPlatform的做法就比较绝了，他只在Element中存储集合信息，其他的信息一律有扩展存储来记录。对于BIM行业来说，他就是玩信息的，哪怕你已经抽象出各种子类去记录信息了，你也不能覆盖全部信息，比如说对一个墙来说，可能比较常用的都有内置属性记录了，但是确实在实际情况中会出现需要记录的其他信息，比如说这个墙的供应商，或者更无厘头一点，这个墙是施工顺序是吧，你这种就没法用类的属性去表示，于是Revit后来也高了一套扩展存储体系，用来给用户机会去存储各种信息。那PowerPlatform处理集合信息之外的全部信息都存在他的扩展存储框架(EC)里的，用户当然可以根据自己的实际需求去记录自己的信息。

显然，这个框架就是解决这个问题的，还是用Revit和Bentley 的PowerPlatform举例，他们的基本元素都是Element，Element的核心还是存储的几何信息。Revit的做做法就是抽象出各种子类去记录特有的信息，而PowerPlatform的做法就比较绝了，他只在Element中存储集合信息，其他的信息一律有扩展存储来记录。对于BIM行业来说，他就是玩信息的，哪怕你已经抽象出各种子类去记录信息了，你也不能覆盖全部信息，比如说对一个墙来说，可能比较常用的都有内置属性记录了，但是确实在实际情况中会出现需要记录的其他信息，比如说这个墙的供应商，或者更无厘头一点，这个墙是施工顺序是吧，你这种就没法用类的属性去表示，于是Revit后来也高了一套扩展存储体系，用来给用户机会去存储各种信息。那PowerPlatform处理集合信息之外的全部信息都存在他的扩展存储框架(EC)里的，用户当然可以根据自己的实际需求去记录自己的信息。

## 框架说明

本框架不改变原有对象的任何数据，会生成一个扩展存储的实例与原有对象关联起来。扩展存储实例专门管理用户的扩展数据。

以下是几个关于扩展存储框架的关键概念

| 类型          | 说明                                                         |
| ------------- | ------------------------------------------------------------ |
| ES Schema     | 类似于“程序集”，是“Class”的集合<br />可以引用其他Schema，方便数据管理<br />需要规定这个Schema有什么类 |
| ES Class      | 类似于“类”，是“Property”的集合<br />需要规定这个Class中有什么属性<br />Class可以创建出扩展存储的实例，这个实例记录信息 |
| ES Property   | 类似于“属性”、“字段”<br />需要规则这个Property存储的什么类型的数据 |
| ES Value      | 具体存储的值                                                 |
| ES Value Type | 具体存储的值的类型                                           |
| ES Instance   | 扩展存储信息的实例，真正存储信息的地方                       |

## 开发记录

2022/8/5	init repo

